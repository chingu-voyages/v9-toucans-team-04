{"ast":null,"code":"(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types', 'classnames', '../models/Hex', '../HexUtils'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'), require('classnames'), require('../models/Hex'), require('../HexUtils'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.React, global.propTypes, global.classnames, global.Hex, global.HexUtils);\n    global.Hexagon = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes, _classnames, _Hex, _HexUtils) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  var _classnames2 = _interopRequireDefault(_classnames);\n\n  var _Hex2 = _interopRequireDefault(_Hex);\n\n  var _HexUtils2 = _interopRequireDefault(_HexUtils);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  var _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  var Hexagon = function (_Component) {\n    _inherits(Hexagon, _Component);\n\n    function Hexagon(props, context) {\n      _classCallCheck(this, Hexagon);\n\n      var _this = _possibleConstructorReturn(this, (Hexagon.__proto__ || Object.getPrototypeOf(Hexagon)).call(this, props, context));\n\n      var q = props.q,\n          r = props.r,\n          s = props.s;\n      var layout = context.layout;\n      var hex = new _Hex2.default(q, r, s);\n\n      var pixel = _HexUtils2.default.hexToPixel(hex, layout);\n\n      _this.state = {\n        hex: hex,\n        pixel: pixel\n      };\n      return _this;\n    } // TODO Refactor to reduce duplicate\n\n\n    _createClass(Hexagon, [{\n      key: 'componentWillReceiveProps',\n      value: function componentWillReceiveProps(nextProps) {\n        var q = nextProps.q,\n            r = nextProps.r,\n            s = nextProps.s;\n        var layout = this.context.layout;\n        var hex = new _Hex2.default(q, r, s);\n\n        var pixel = _HexUtils2.default.hexToPixel(hex, layout);\n\n        this.setState({\n          hex: hex,\n          pixel: pixel\n        });\n      }\n    }, {\n      key: 'onMouseEnter',\n      value: function onMouseEnter(e) {\n        if (this.props.onMouseEnter) {\n          this.props.onMouseEnter(e, this);\n        }\n      }\n    }, {\n      key: 'onMouseOver',\n      value: function onMouseOver(e) {\n        if (this.props.onMouseOver) {\n          this.props.onMouseOver(e, this);\n        }\n      }\n    }, {\n      key: 'onMouseLeave',\n      value: function onMouseLeave(e) {\n        if (this.props.onMouseLeave) {\n          this.props.onMouseLeave(e, this);\n        }\n      }\n    }, {\n      key: 'onClick',\n      value: function onClick(e) {\n        if (this.props.onClick) {\n          this.props.onClick(e, this);\n        }\n      }\n    }, {\n      key: 'onDragStart',\n      value: function onDragStart(e) {\n        if (this.props.onDragStart) {\n          var targetProps = _extends({}, this.state, {\n            data: this.props.data,\n            fill: this.props.fill,\n            className: this.props.className\n          });\n\n          e.dataTransfer.setData('hexagon', JSON.stringify(targetProps));\n          this.props.onDragStart(e, this);\n        }\n      }\n    }, {\n      key: 'onDragEnd',\n      value: function onDragEnd(e) {\n        if (this.props.onDragEnd) {\n          e.preventDefault();\n          var success = e.dataTransfer.dropEffect !== 'none';\n          this.props.onDragEnd(e, this, success);\n        }\n      }\n    }, {\n      key: 'onDragOver',\n      value: function onDragOver(e) {\n        if (this.props.onDragOver) {\n          this.props.onDragOver(e, this);\n        }\n      }\n    }, {\n      key: 'onDrop',\n      value: function onDrop(e) {\n        if (this.props.onDrop) {\n          e.preventDefault();\n          var target = JSON.parse(e.dataTransfer.getData('hexagon'));\n          this.props.onDrop(e, this, target);\n        }\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var _this2 = this;\n\n        var _props = this.props,\n            fill = _props.fill,\n            cellStyle = _props.cellStyle,\n            className = _props.className;\n        var points = this.context.points;\n        var _state = this.state,\n            hex = _state.hex,\n            pixel = _state.pixel;\n        var fillId = fill ? 'url(#' + fill + ')' : null;\n        return _react2.default.createElement('g', {\n          className: (0, _classnames2.default)('hexagon-group', className),\n          transform: 'translate(' + pixel.x + ', ' + pixel.y + ')',\n          draggable: 'true',\n          onMouseEnter: function onMouseEnter(e) {\n            return _this2.onMouseEnter(e);\n          },\n          onMouseOver: function onMouseOver(e) {\n            return _this2.onMouseOver(e);\n          },\n          onMouseLeave: function onMouseLeave(e) {\n            return _this2.onMouseLeave(e);\n          },\n          onClick: function onClick(e) {\n            return _this2.onClick(e);\n          },\n          onDragStart: function onDragStart(e) {\n            return _this2.onDragStart(e);\n          },\n          onDragEnd: function onDragEnd(e) {\n            return _this2.onDragEnd(e);\n          },\n          onDragOver: function onDragOver(e) {\n            return _this2.onDragOver(e);\n          },\n          onDrop: function onDrop(e) {\n            return _this2.onDrop(e);\n          }\n        }, _react2.default.createElement('g', {\n          className: 'hexagon'\n        }, _react2.default.createElement('polygon', {\n          points: points,\n          fill: fillId,\n          style: cellStyle\n        }), this.props.children));\n      }\n    }]);\n\n    return Hexagon;\n  }(_react.Component);\n\n  Hexagon.propTypes = {\n    q: _propTypes2.default.number.isRequired,\n    r: _propTypes2.default.number.isRequired,\n    s: _propTypes2.default.number.isRequired,\n    fill: _propTypes2.default.string,\n    cellStyle: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n    className: _propTypes2.default.string,\n    data: _propTypes2.default.object,\n    onMouseEnter: _propTypes2.default.func,\n    onMouseOver: _propTypes2.default.func,\n    onMouseLeave: _propTypes2.default.func,\n    onClick: _propTypes2.default.func,\n    onDragStart: _propTypes2.default.func,\n    onDragEnd: _propTypes2.default.func,\n    onDragOver: _propTypes2.default.func,\n    onDrop: _propTypes2.default.func,\n    children: _propTypes2.default.node\n  };\n  Hexagon.contextTypes = {\n    layout: _propTypes2.default.object,\n    // TODO Shape\n    points: _propTypes2.default.string\n  };\n  exports.default = Hexagon;\n});","map":null,"metadata":{},"sourceType":"script"}